import { LANGUAGES } from './constants';

export interface Translations {
  [key: string]: string;
}

export const translations: Record<string, Translations> = {
  es: {
    'nav.title': 'Albergue Del Carrascalejo',
    'nav.admin': 'Administración',
    'hero.welcome': 'Bienvenido Peregrino',
    'hero.subtitle': 'Registro rápido y seguro para tu estancia en el Camino',
    'hero.beds_available': 'Camas disponibles',
    'hero.price_per_night': 'Por persona/noche',
    'stay.title': 'Información de la estancia',
    'stay.dates': 'Fechas de estancia',
    'stay.nights': 'Número de noches',
    'stay.guests': 'Personas',
    'stay.guest_single': 'persona',
    'stay.guest_plural': 'personas',
    'stay.individual_only': 'Solo registro individual',
    'stay.continue': 'Continuar con el registro',
    'stay.available': '¡Disponible! {count} camas libres para las fechas seleccionadas',
    'stay.not_available': 'No hay suficientes camas disponibles para estas fechas',
    'stay.next_available': 'Próxima fecha disponible: {date}',
    'pricing.per_night': 'por noche',
    'pricing.night': 'noche',
    'pricing.nights': 'noches',
    'pricing.total': 'Total',
    'pricing.payment_due': 'Pago a la llegada',
    'pricing.accepted_methods': 'Métodos aceptados de pago',
    'registration.title': 'Registro de peregrino',
    'registration.step1': 'Fechas y huéspedes',
    'registration.step2': 'Información personal',
    'registration.step3': 'Confirmación',
    'registration.photo_capture': 'Fotografía del documento',
    'registration.take_photo': 'Tomar foto',
    'registration.upload_photo': 'Subir imagen',
    'registration.photo_instructions': 'Tome una foto clara de su DNI, NIE o pasaporte',
    'registration.processing_ocr': 'Procesando documento...',
    'registration.ocr_success': 'Documento procesado correctamente',
    'registration.personal_info': 'Información personal',
    'registration.address_info': 'Dirección',
    'registration.contact_info': 'Contacto',
    'registration.payment_info': 'Información de pago',
    'payment.efect': 'Efectivo (en recepción)',
    'payment.tarjt': 'Tarjeta de crédito/débito',
    'payment.trans': 'Transferencia bancaria',
    'guest.singular': 'persona',
    'guest.plural': 'personas',
    'night.singular': 'noche',
    'night.plural': 'noches',
    'document.nif': 'DNI/NIF',
    'document.nie': 'NIE',
    'document.pas': 'Pasaporte',
    'document.otro': 'Otro documento',
    'document.upload_title': 'Subida de documento',
    'document.type_required': 'Tipo de documento *',
    'document.select_first': 'Seleccione el tipo de documento primero',
    'document.front_side': 'Cara frontal',
    'document.back_side': 'Cara trasera',
    'document.main_page': 'Página principal',
    'document.processed_successfully': 'Procesado correctamente',
    'document.processing_complete': '¡Procesamiento de documento completado!',
    'document.processing_complete_desc': 'Todas las caras requeridas del documento han sido procesadas correctamente.',
    'document.remove': 'Eliminar',
    'document.camera': 'Cámara',
    'document.upload': 'Subir archivo',
    'document.take_photo': 'Tomar foto',
    'document.select_file': 'Seleccionar archivo',
    'document.expected_front': 'Esperado: Nombre, número de documento, foto, fecha de validez',
    'document.expected_back': 'Esperado: Dirección, código postal, detalles adicionales',
    'gender.h': 'Hombre',
    'gender.m': 'Mujer',
    'gender.o': 'Otro',
    'registration.protected_data': 'Datos protegidos según normativa española',
    'registration.first_name': 'Nombre',
    'registration.last_name_1': 'Primer apellido',
    'registration.last_name_2': 'Segundo apellido',
    'registration.birth_date': 'Fecha de nacimiento',
    'registration.document_type': 'Tipo de documento',
    'registration.document_number': 'Número de documento',
    'registration.gender': 'Sexo',
    'registration.nationality': 'Nacionalidad',

    'registration.upload_file': 'Subir archivo',
    'registration.country': 'País de residencia',
    'registration.address': 'Dirección',
    'registration.address_2': 'Dirección adicional',
    'registration.city': 'Ciudad',
    'registration.postal_code': 'Código postal',
    'registration.municipality_code': 'Código municipio',
    'registration.phone': 'Teléfono',
    'registration.email': 'Email',
    'registration.payment_type': 'Tipo de pago',
    'registration.total': 'Total',
    'registration.compliance': 'Cumplimiento normativo',
    'registration.compliance_text': 'Tus datos serán transmitidos automáticamente a las autoridades españolas según el Real Decreto 933/2021 sobre obligaciones de registro en hospedajes.',
    'registration.back': 'Volver',
    'registration.submit': 'Completar registro',
    'loading.processing': 'Procesando...',
    'common.cancel': 'Cancelar',
    'admin.title': 'Panel de Administración',
    'admin.dashboard': 'Dashboard',
    'admin.checkin': 'Check-in',
    'admin.checkout': 'Check-out',
    'admin.beds': 'Gestión de camas',
    'admin.payments': 'Pagos',
    'admin.occupancy_today': 'Ocupación hoy',
    'admin.revenue_today': 'Ingresos hoy',
    'admin.pending_checkins': 'Check-ins pendientes',
    'admin.compliance_rate': 'Tasa cumplimiento',
    'admin.bed_status': 'Estado de las camas',
    'admin.available': 'Disponible',
    'admin.occupied': 'Ocupado',
    'admin.maintenance': 'Mantenimiento',
    'admin.recent_registrations': 'Registros recientes',
    'admin.pilgrim': 'Peregrino',
    'admin.document': 'Documento',
    'admin.bed': 'Cama',
    'admin.status': 'Estado',
    'admin.actions': 'Acciones',
    'admin.view_details': 'Ver detalles',
    'admin.assign_bed': 'Asignar cama',
    'admin.no_bookings': 'No hay reservas recientes',
    'admin.coming_soon': 'Funcionalidad de pagos próximamente...',
    'notifications.success': 'Registro completado con éxito',
    'notifications.error': 'Error en el envío de datos',

    'loading.submitting': 'Enviando datos a las autoridades españolas...',
    'errors.required': 'Este campo es obligatorio',
    'errors.invalid_email': 'Email inválido',
    'errors.invalid_document': 'Formato de documento inválido',
    'errors.invalid_phone': 'Formato de teléfono inválido',
    'auth.welcome': 'Bienvenido',
    'auth.logout': 'Cerrar sesión',
    'auth.login_required': 'Autenticación requerida',
    'auth.loading': 'Cargando panel de administración...',
    
    // Validation
    'validation.first_name_required': 'El nombre es obligatorio',
    'validation.last_name_required': 'El apellido es obligatorio', 
    'validation.birth_date_required': 'La fecha de nacimiento es obligatoria',
    'validation.document_number_required': 'El número de documento es obligatorio',
    'validation.gender_required': 'El género es obligatorio',
    'validation.nationality_required': 'La nacionalidad es obligatoria',
    'validation.phone_required': 'El teléfono es obligatorio',
    'validation.country_required': 'El país es obligatorio',
    
    // General
    'general.locale_code': 'es-ES',
  },
  en: {
    'nav.title': 'Albergue Del Carrascalejo',
    'nav.admin': 'Administration',
    'hero.welcome': 'Welcome Pilgrim',
    'hero.subtitle': 'Quick and secure registration for your stay on the Camino',
    'hero.beds_available': 'Available beds',
    'hero.price_per_night': 'Per person/night',
    'stay.title': 'Stay Information',
    'stay.dates': 'Stay dates',
    'stay.nights': 'Number of nights',
    'stay.guests': 'Guests',
    'stay.guest_single': 'person',
    'stay.guest_plural': 'people',
    'stay.individual_only': 'Individual registration only',
    'stay.continue': 'Continue with registration',
    'stay.available': 'Available! {count} free beds for selected dates',
    'stay.not_available': 'Not enough beds available for these dates',
    'stay.next_available': 'Next available date: {date}',
    'pricing.per_night': 'per night',
    'pricing.night': 'night',
    'pricing.nights': 'nights',
    'pricing.total': 'Total',
    'pricing.payment_due': 'Payment due at arrival',
    'pricing.accepted_methods': 'Accepted methods',
    'registration.title': 'Pilgrim Registration',
    'registration.step1': 'Dates & Guests',
    'registration.step2': 'Personal Information',
    'registration.step3': 'Confirmation',
    'registration.photo_capture': 'Document Photo',
    'registration.take_photo': 'Take Photo',
    'registration.upload_photo': 'Upload Image',
    'registration.photo_instructions': 'Take a clear photo of your ID, NIE or passport',
    'registration.processing_ocr': 'Processing document...',
    'registration.ocr_success': 'Document processed successfully',
    'registration.personal_info': 'Personal Information',
    'registration.address_info': 'Address',
    'registration.contact_info': 'Contact',
    'registration.payment_info': 'Payment Information',
    'payment.efect': 'Cash (at reception)',
    'payment.tarjt': 'Credit/Debit Card',
    'payment.trans': 'Bank Transfer',
    'guest.singular': 'person',
    'guest.plural': 'people',
    'night.singular': 'night',
    'night.plural': 'nights',
    'document.nif': 'DNI/NIF',
    'document.nie': 'NIE',
    'document.pas': 'Passport',
    'document.otro': 'Other document',
    'document.upload_title': 'Document Upload',
    'document.type_required': 'Document Type *',
    'document.select_first': 'Select document type first',
    'document.front_side': 'Front Side',
    'document.back_side': 'Back Side',
    'document.main_page': 'Main Page',
    'document.processed_successfully': 'Processed successfully',
    'document.processing_complete': 'Document processing complete!',
    'document.processing_complete_desc': 'All required document sides have been processed successfully.',
    'document.remove': 'Remove',
    'document.camera': 'Camera',
    'document.upload': 'Upload File',
    'document.take_photo': 'Take Photo',
    'document.select_file': 'Select File',
    'document.expected_front': 'Expected: Name, ID number, photo, validity date',
    'document.expected_back': 'Expected: Address, postal code, additional details',
    'gender.h': 'Male',
    'gender.m': 'Female',
    'gender.o': 'Other',
    'registration.protected_data': 'Data protected according to Spanish regulations',
    'registration.first_name': 'First Name',
    'registration.last_name_1': 'Last Name',
    'registration.last_name_2': 'Second Last Name',
    'registration.birth_date': 'Birth Date',
    'registration.document_type': 'Document Type',
    'registration.document_number': 'Document Number',
    'registration.gender': 'Gender',
    'registration.nationality': 'Nationality',

    'registration.upload_file': 'Upload File',
    'registration.country': 'Country of Residence',
    'registration.address': 'Address',
    'registration.address_2': 'Additional Address',
    'registration.city': 'City',
    'registration.postal_code': 'Postal Code',
    'registration.municipality_code': 'Municipality Code',
    'registration.phone': 'Phone',
    'registration.email': 'Email',
    'registration.payment_type': 'Payment Type',
    'registration.total': 'Total',
    'registration.compliance': 'Regulatory Compliance',
    'registration.compliance_text': 'Your data will be automatically transmitted to Spanish authorities according to Royal Decree 933/2021 on accommodation registration obligations.',
    'registration.back': 'Back',
    'registration.submit': 'Complete Registration',
    'loading.processing': 'Processing...',
    'common.cancel': 'Cancel',
    'admin.title': 'Administration Panel',
    'admin.dashboard': 'Dashboard',
    'admin.checkin': 'Check-in',
    'admin.checkout': 'Check-out',
    'admin.beds': 'Bed Management',
    'admin.payments': 'Payments',
    'admin.occupancy_today': 'Occupancy Today',
    'admin.revenue_today': 'Revenue Today',
    'admin.pending_checkins': 'Pending Check-ins',
    'admin.compliance_rate': 'Compliance Rate',
    'admin.bed_status': 'Bed Status',
    'admin.available': 'Available',
    'admin.occupied': 'Occupied',
    'admin.maintenance': 'Maintenance',
    'admin.recent_registrations': 'Recent Registrations',
    'admin.pilgrim': 'Pilgrim',
    'admin.document': 'Document',
    'admin.bed': 'Bed',
    'admin.status': 'Status',
    'admin.actions': 'Actions',
    'admin.view_details': 'View Details',
    'admin.assign_bed': 'Assign Bed',
    'admin.no_bookings': 'No recent bookings found',
    'admin.coming_soon': 'Payment management functionality coming soon...',
    'notifications.success': 'Registration completed successfully',
    'notifications.error': 'Error in data submission',

    'loading.submitting': 'Submitting data to Spanish authorities...',
    'errors.required': 'This field is required',
    'errors.invalid_email': 'Invalid email',
    'errors.invalid_document': 'Invalid document format',
    'errors.invalid_phone': 'Invalid phone format',
    'auth.welcome': 'Welcome',
    'auth.logout': 'Logout',
    'auth.login_required': 'Authentication required',
    'auth.loading': 'Loading admin panel...',
    
    // Validation
    'validation.first_name_required': 'First name is required',
    'validation.last_name_required': 'Last name is required', 
    'validation.birth_date_required': 'Birth date is required',
    'validation.document_number_required': 'Document number is required',
    'validation.gender_required': 'Gender is required',
    'validation.nationality_required': 'Nationality is required',
    'validation.phone_required': 'Phone number is required',
    'validation.country_required': 'Country is required',
    
    // General
    'general.locale_code': 'en-US',
  },
  // Additional languages would be added here...
};

export class I18n {
  private currentLanguage: string = 'es';

  constructor() {
    this.detectBrowserLanguage();
  }

  private detectBrowserLanguage(): void {
    const browserLang = navigator.language.split('-')[0];
    const supportedLang = LANGUAGES.find(lang => lang.code === browserLang);
    
    if (supportedLang && translations[browserLang]) {
      this.currentLanguage = browserLang;
    }
  }

  setLanguage(language: string): void {
    if (translations[language]) {
      this.currentLanguage = language;
    }
  }

  getLanguage(): string {
    return this.currentLanguage;
  }

  t(key: string, variables?: Record<string, string | number>): string {
    const translation = translations[this.currentLanguage]?.[key] || translations['es'][key] || key;
    
    if (variables) {
      return Object.entries(variables).reduce((str, [key, value]) => {
        return str.replace(`{${key}}`, String(value));
      }, translation);
    }
    
    return translation;
  }
}

export const i18n = new I18n();
